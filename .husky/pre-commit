echo "ğŸ” Running pre-commit checks..."

# Run lint-staged first (linting and formatting)
echo "ğŸ§¹ Linting and formatting staged files..."
npx lint-staged

# If lint-staged succeeds, run tests
if [ $? -eq 0 ]; then
  echo "ğŸ§ª Running tests..."
  npm test
  if [ $? -ne 0 ]; then
    echo "âŒ Tests failed! Please fix tests before committing."
    echo "ğŸ’¡ Use 'git commit --no-verify' to bypass hooks in emergencies."
    exit 1
  fi
  echo "âœ… All pre-commit checks passed!"
else
  echo "âŒ Linting/formatting failed! Please fix issues before committing."
  echo "ğŸ’¡ Use 'git commit --no-verify' to bypass hooks in emergencies."
  exit 1
fi
